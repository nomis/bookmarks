<p><%= link_to "New", new_bookmark_path, rel: "nofollow" %></p>
<% unless tags.empty? %>
<h2>Tags</h2>
<ul class="tags">
	<% tags.each do |tag, count|
		if matching.include?(tag.id) then
			%><li class="matching">
			<strong><%
		else
			%><li><%
		end
		%>
			<%= link_to_search_by_tags(tag, matching) %>
			<% if matching.include?(tag.id) %></strong><% end %>
			<span class="count"><span class="alt_text">(</span><%= count %><span class="alt_text">)</span></span>
		</li>
	<% end %>
</ul>
<% end %>
<h2>Bookmarks</h2>
<ol class="bookmarks">
	<% bookmarks.each do |bookmark| %>
	<li>
		<%= link_to bookmark.title, bookmark.uri %><%
			uri = URI.parse(bookmark.uri)
			if uri.host
				%> (<%= uri.host %>)<%
			end
		%>
		<dl>
			<dt><span class="alt_text"><%= Bookmark.human_attribute_name(:tags) %>:</span></dt>
			<dd>
				<ul class="item_tags">
					<% bookmark.tags.sort_by(&:name).each do |tag| %>
						<% if matching.include?(tag.id) %><strong><% end %>
						<li><%= link_to_search_by_tags(tag, matching) %></li>
						<% if matching.include?(tag.id) %></strong><% end %>
					<% end %>
				</ul>
			</dd>
			<dt><span class="alt_text">Actions:</span></dt>
			<dd>
				<ul class="item_menu">
					<li><%= link_to "Edit", edit_bookmark_path(bookmark), rel: "nofollow" %></li>
					<li><%= link_to "Delete", bookmark_path(bookmark), method: :delete, data: { confirm: 'Are you sure?' } %></li>
				</ul>
			</dd>
		</dl>
	</li>
	<% end %>
</ol>
